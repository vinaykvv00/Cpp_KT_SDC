# UDP Chat Room - Visual Architecture

## System Overview
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     UDP CHAT ROOM SYSTEM                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Alice      â”‚         â”‚     Bob      â”‚         â”‚   Charlie    â”‚
    â”‚ (User/Client)â”‚         â”‚ (User/Client)â”‚         â”‚ (User/Client)â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                         â”‚                         â”‚
           â”‚  UDP Packets            â”‚  UDP Packets            â”‚
           â”‚  127.0.0.1:5001         â”‚  127.0.0.1:5002        â”‚
           â”‚                         â”‚                         â”‚
           â–¼                         â–¼                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    SERVER (127.0.0.1:8080)                   â”‚
    â”‚                                                              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚            ROOM MANAGER (Thread-Safe)              â”‚    â”‚
    â”‚  â”‚                                                    â”‚    â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
    â”‚  â”‚  â”‚  Room: "general"                         â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â”œâ”€ Alice (127.0.0.1:5001)              â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â””â”€ Bob   (127.0.0.1:5002)              â”‚    â”‚    â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
    â”‚  â”‚                                                    â”‚    â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
    â”‚  â”‚  â”‚  Room: "gaming"                          â”‚    â”‚    â”‚
    â”‚  â”‚  â”‚  â””â”€ Charlie (127.0.0.1:5003)            â”‚    â”‚    â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
    â”‚  â”‚                                                    â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Client (User) Architecture
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHAT USER PROCESS                        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         MAIN THREAD (Sender)                      â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚  1. Read from keyboard: getline(cin, input)      â”‚    â”‚
â”‚  â”‚  2. Parse commands:                               â”‚    â”‚
â”‚  â”‚     - "/join general" â†’ Create JOIN message       â”‚    â”‚
â”‚  â”‚     - "Hello" â†’ Create CHAT message               â”‚    â”‚
â”‚  â”‚  3. sendto(server, message)                       â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚      RECEIVER THREAD (Background - Detached)      â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚  while(true) {                                    â”‚    â”‚
â”‚  â”‚      recvfrom(socket, buffer);                    â”‚    â”‚
â”‚  â”‚      Message msg = deserialize(buffer);           â”‚    â”‚
â”‚  â”‚      cout << "[" << msg.username << "]: "         â”‚    â”‚
â”‚  â”‚           << msg.content << endl;                 â”‚    â”‚
â”‚  â”‚  }                                                â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  Both threads run simultaneously!                          â”‚
â”‚  Main: Handles sending                                     â”‚
â”‚  Receiver: Handles receiving (non-blocking)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Server Architecture
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHAT SERVER PROCESS                      â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         MAIN THREAD (Single-threaded server)      â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚  while(true) {                                    â”‚    â”‚
â”‚  â”‚      // Wait for any message from any user       â”‚    â”‚
â”‚  â”‚      recvfrom(socket, buffer, &client_addr);     â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚      Message msg = deserialize(buffer);           â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚      if (msg.type == "JOIN") {                    â”‚    â”‚
â”‚  â”‚          lock(rooms_mutex);                       â”‚    â”‚
â”‚  â”‚          rooms[msg.room].addUser(...);            â”‚    â”‚
â”‚  â”‚          unlock(rooms_mutex);                     â”‚    â”‚
â”‚  â”‚      }                                            â”‚    â”‚
â”‚  â”‚      else if (msg.type == "CHAT") {               â”‚    â”‚
â”‚  â”‚          vector<UserInfo> members =               â”‚    â”‚
â”‚  â”‚              rooms[msg.room].getMembers();        â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â”‚          // Broadcast to all room members         â”‚    â”‚
â”‚  â”‚          for (user in members) {                  â”‚    â”‚
â”‚  â”‚              sendto(socket, msg, user.address);   â”‚    â”‚
â”‚  â”‚          }                                        â”‚    â”‚
â”‚  â”‚      }                                            â”‚    â”‚
â”‚  â”‚      else if (msg.type == "LEAVE") {              â”‚    â”‚
â”‚  â”‚          lock(rooms_mutex);                       â”‚    â”‚
â”‚  â”‚          rooms[msg.room].removeUser(...);         â”‚    â”‚
â”‚  â”‚          unlock(rooms_mutex);                     â”‚    â”‚
â”‚  â”‚      }                                            â”‚    â”‚
â”‚  â”‚  }                                                â”‚    â”‚
â”‚  â”‚                                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Message Flow: Alice sends "Hello" in "general" room

```
Step 1: Alice types message
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Alice     â”‚
â”‚             â”‚
â”‚ > Hello!    â”‚ â† User types in terminal
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ Main thread processes input
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create Message:                     â”‚
â”‚   type: "CHAT"                      â”‚
â”‚   username: "Alice"                 â”‚
â”‚   room_name: "general"              â”‚
â”‚   content: "Hello!"                 â”‚
â”‚                                     â”‚
â”‚ Serialize: "CHAT|Alice|general|Hello!"â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ sendto(server_socket, ...)
      â”‚
      â–¼

Step 2: UDP packet travels to server
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UDP Packet                         â”‚
â”‚  From: 127.0.0.1:5001 (Alice)      â”‚
â”‚  To:   127.0.0.1:8080 (Server)     â”‚
â”‚  Data: "CHAT|Alice|general|Hello!"  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼

Step 3: Server receives and processes
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server Main Thread                 â”‚
â”‚                                     â”‚
â”‚  recvfrom() â†’ Gets packet           â”‚
â”‚  client_addr = 127.0.0.1:5001      â”‚
â”‚                                     â”‚
â”‚  Parse message:                     â”‚
â”‚    msg.type = "CHAT"                â”‚
â”‚    msg.username = "Alice"           â”‚
â”‚    msg.room_name = "general"        â”‚
â”‚    msg.content = "Hello!"           â”‚
â”‚                                     â”‚
â”‚  Look up room "general":            â”‚
â”‚    members = [Alice, Bob]           â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                  â”‚                 â”‚
      â–¼                  â–¼                 â–¼

Step 4: Server broadcasts to room members
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ sendto()     â”‚  â”‚ sendto()     â”‚  â”‚ Skip Alice   â”‚
â”‚ Dest: Alice  â”‚  â”‚ Dest: Bob    â”‚  â”‚ (sender)     â”‚
â”‚ (optional)   â”‚  â”‚              â”‚  â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ UDP Packet
                         â”‚
                         â–¼

Step 5: Bob's receiver thread gets message
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Bob's Process                     â”‚
â”‚                                     â”‚
â”‚   Receiver Thread:                  â”‚
â”‚   recvfrom() â†’ Packet received      â”‚
â”‚   Parse: "CHAT|Alice||Hello!"       â”‚
â”‚   Display: "[Alice]: Hello!"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Bob's terminal shows:
> /join general
âœ“ Joined room 'general'

[Alice]: Hello!    â† Appears here!

> â† Bob can still type (separate thread)
```

## Data Structures

### UserInfo
```
struct UserInfo {
    string username;   // "Alice"
    string ip;         // "127.0.0.1"
    int port;          // 5001
}
```

### Room
```
class Room {
    string room_name_;           // "general"
    vector<UserInfo> members_;   // [Alice, Bob]
    mutex mtx_;                  // Thread safety
}
```

### Message
```
class Message {
    string type;       // "JOIN", "CHAT", "LEAVE"
    string username;   // "Alice"
    string room_name;  // "general"
    string content;    // "Hello!"
}
```

### Server State
```
map<string, shared_ptr<Room>> rooms = {
    "general" â†’ Room {
        members: [
            UserInfo("Alice", "127.0.0.1", 5001),
            UserInfo("Bob", "127.0.0.1", 5002)
        ]
    },
    "gaming" â†’ Room {
        members: [
            UserInfo("Charlie", "127.0.0.1", 5003)
        ]
    }
}
```

## Message Protocol (Pipe-Delimited)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Message Type  â”‚  Format                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  JOIN          â”‚  "JOIN|<username>|<room>"               â”‚
â”‚                â”‚  Example: "JOIN|Alice|general"           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CHAT          â”‚  "CHAT|<username>|<room>|<content>"     â”‚
â”‚                â”‚  Example: "CHAT|Alice|general|Hello!"    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  LEAVE         â”‚  "LEAVE|<username>|<room>"              â”‚
â”‚                â”‚  Example: "LEAVE|Alice|general"          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Serialization:
  Message object â†’ String (with pipes)

Deserialization:
  String â†’ Split by '|' â†’ Message object
```

## Threading Model Summary

```
SERVER (Single-threaded):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Main Thread          â”‚
â”‚   - recvfrom() loop    â”‚
â”‚   - Handle all msgs    â”‚
â”‚   - Broadcast          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CLIENT (Multi-threaded):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Main Thread          â”‚  â”‚  Receiver Thread       â”‚
â”‚   - Read keyboard      â”‚  â”‚  - recvfrom() loop     â”‚
â”‚   - Send messages      â”‚  â”‚  - Display messages    â”‚
â”‚   - Parse commands     â”‚  â”‚  - Non-blocking        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Both run simultaneously â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Room Isolation Demonstration

```
Scenario: 3 users, 2 rooms

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Room: "general"    â”‚         â”‚  Room: "gaming"     â”‚
â”‚                     â”‚         â”‚                     â”‚
â”‚  ğŸ‘¤ Alice           â”‚         â”‚  ğŸ‘¤ Charlie         â”‚
â”‚  ğŸ‘¤ Bob             â”‚         â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                               â”‚
         â”‚                               â”‚
    Alice: "Hello!"                Charlie: "Anyone?"
         â”‚                               â”‚
         â–¼                               â–¼
    Bob receives âœ“                  (No one receives)
    Charlie does NOT âœ“              Alice does NOT âœ“
                                    Bob does NOT âœ“

âœ“ Messages stay within their room!
âœ“ No cross-room communication!
```

## Complete Flow Chart

```
USER STARTS
    â†“
Enter username
    â†“
Start receiver thread (background)
    â†“
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                  â†“                  â†“
Main Thread      Receiver Thread      Commands
Read input       recvfrom() loop      /join <room>
    â†“                  â†“                  â†“
Parse command    Display messages   /leave
    â†“                  â†“                  â†“
Create message   (runs forever)     /quit
    â†“                                    â†“
sendto(server)                      Exit program
    â†“
Back to reading input
```

This is the complete visual representation of the UDP Chat Room system! ğŸ‰
